<div class="container mt-4">
  <h2>{{ isEditMode ? 'Edit Book' : 'Add New Book' }}</h2>

  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="mt-3">
    <!-- Title Field -->
    <div class="mb-3">
      <label for="titre" class="form-label">Title</label>
      <input
        type="text"
        class="form-control"
        id="titre"
        formControlName="titre"
        [class.is-invalid]="form.get('titre')?.invalid && form.get('titre')?.touched"
      />
      <div *ngIf="form.get('titre')?.invalid && form.get('titre')?.touched" class="invalid-feedback">
        Title is required
      </div>
    </div>

    <!-- Author Field -->
    <div class="mb-3">
      <label for="auteur" class="form-label">Author</label>
      <input
        type="text"
        class="form-control"
        id="auteur"
        formControlName="auteur"
        [class.is-invalid]="form.get('auteur')?.invalid && form.get('auteur')?.touched"
      />
      <div *ngIf="form.get('auteur')?.invalid && form.get('auteur')?.touched" class="invalid-feedback">
        Author is required
      </div>
    </div>

    <!-- Year Field -->
    <div class="mb-3">
      <label for="annee" class="form-label">Publication Year</label>
      <input
        type="number"
        class="form-control"
        id="annee"
        formControlName="annee"
        [class.is-invalid]="form.get('annee')?.invalid && form.get('annee')?.touched"
      />
      <div *ngIf="form.get('annee')?.invalid && form.get('annee')?.touched" class="invalid-feedback">
        <div *ngIf="form.get('annee')?.errors?.['required']">Year is required</div>
        <div *ngIf="form.get('annee')?.errors?.['min']">Year must be at least 1900</div>
        <div *ngIf="form.get('annee')?.errors?.['max']">Year cannot be in the future</div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="d-flex gap-2">
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="form.invalid"
      >
        {{ isEditMode ? 'Update' : 'Save' }}
      </button>
      <button type="button" class="btn btn-outline-secondary" routerLink="/">
        Cancel
      </button>
    </div>
  </form>
</div>
